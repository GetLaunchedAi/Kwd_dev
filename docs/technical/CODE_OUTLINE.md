# Code Outline: ClickUp to Cursor Workflow Tool

## Current Flow of the Tool

Currently, the tool's flow is primarily manual and focused on initial setup and cleanup.

1.  **Manual Setup:**
    *   `npm install`: Installs necessary dependencies.
    *   `.env` file configuration: Manually configure API tokens and other sensitive information.
    *   `config/config.json` configuration: Manually set up project-specific configurations.
    *   `npm run build`: Compiles TypeScript code into JavaScript.
    *   `npm start`: Starts the application server.

2.  **File Management:**
    *   **User Action:** User identifies completed tasks and their associated markdown files (e.g., "button testing" and "accessibility ones").
    *   **AI Action:** The AI, upon user instruction, performs `delete_file` commands for each specified markdown file in the root directory.
        *   Example commands:
            *   `default_api.delete_file(target_file="BUTTON_ACCESSIBILITY_ANALYSIS.md")`
            *   `default_api.delete_file(target_file="BUTTON_TESTING_SUMMARY.md")`
    *   **Data Movement:** No significant data movement occurs at this stage beyond file deletion and confirmation.

3.  **Project Progress Tracking:**
    *   **User Action:** User requests a project progress update.
    *   **AI Action:** The AI creates `PROJECT_PROGRESS.md` based on current understanding of the project's status, features, and completed tasks.
        *   Example command:
            *   `default_api.write(file_path="PROJECT_PROGRESS.md", contents="# Project Progress...")`
    *   **Data Movement:** Information is extracted from the AI's current context and formatted into a new markdown file.

## Intended Flow of the Tool (After Completion)

Once the application is fully developed, the workflow will be largely automated, reacting to ClickUp webhooks.

1.  **ClickUp Webhook Reception:**
    *   **Event:** A task status changes in ClickUp (e.g., from "in progress" to "ready for review").
    *   **Tool Action:** The `server.ts` (or similar webhook handler) receives the webhook payload.
    *   **Data Movement:** The webhook payload (JSON data containing task ID, status, changes, etc.) is received by the application.

2.  **Task Identification and Context Retrieval:**
    *   **Tool Action:** The application parses the webhook payload to identify the relevant ClickUp task ID.
    *   **Tool Action:** Using the ClickUp API (via `clickup/apiClient.ts`), the application fetches detailed information about the task, including its description, requirements, and associated files (if stored in ClickUp custom fields or linked resources).
    *   **Data Movement:** ClickUp task data is retrieved from ClickUp and processed by the application.

3.  **Client Website Folder Identification:**
    *   **Tool Action:** The application uses `config/task-client-mappings.json` (or similar) to map the ClickUp task to the corresponding client website repository in the `github-clone-all/client-websites/` directory.
    *   **Tool Action:** The `git/repoManager.ts` (or similar) will ensure the correct repository is checked out and up-to-date.
    *   **Data Movement:** Configuration data is read, and potentially Git operations (e.g., `git checkout <branch>`, `git pull`) are executed.

4.  **Cursor Agent Interaction (Code Changes):**
    *   **Tool Action:** The application, acting as a proxy, initiates a conversation with Cursor's agent.
    *   **Tool Action:** The task description and requirements (from ClickUp) are fed to Cursor's agent.
    *   **Tool Action:** Cursor's agent, utilizing its own tools (e.g., `codebase_search`, `read_file`, `search_replace`, `write`, `delete_file`), identifies necessary code changes and implements them.
    *   **Data Movement:** Task requirements are sent to Cursor, code changes are generated by Cursor, and then applied to the local filesystem by the application.

5.  **Automated Testing:**
    *   **Tool Action:** After code changes are applied, the application runs automated tests within the client website's directory.
    *   **Tool Action:** Commands like `npm test` or `yarn test` would be executed via `run_terminal_cmd`.
    *   **Data Movement:** Test results (success/failure, error logs) are captured.

6.  **Approval Workflow:**
    *   **Tool Action:** If tests pass, the application sends approval notifications (via `approval/emailService.ts` and `approval/slackService.ts`) to relevant stakeholders.
    *   **Data Movement:** Test results and a summary of changes are formatted and sent as emails or Slack messages.

7.  **GitHub Push:**
    *   **Event:** Upon approval (either manual via email/Slack, or automated based on policy), the application proceeds to push changes to GitHub.
    *   **Tool Action:** The `git/branchManager.ts` (or similar) will handle committing the changes and pushing to the appropriate branch (e.g., `git commit -m "feat: ClickUp task <ID>"`, `git push origin <branch>`).
    *   **Data Movement:** Code changes are pushed to the remote GitHub repository.

8.  **ClickUp Task Status Update:**
    *   **Tool Action:** The application updates the ClickUp task status (e.g., to "completed" or "merged") using the ClickUp API (`clickup/apiClient.ts`).
    *   **Data Movement:** Status update is sent back to ClickUp.







